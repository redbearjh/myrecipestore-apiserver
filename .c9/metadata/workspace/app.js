{"filter":false,"title":"app.js","tooltip":"/app.js","undoManager":{"mark":25,"position":25,"stack":[[{"start":{"row":110,"column":0},"end":{"row":121,"column":0},"action":"remove","lines":["","// var htmlapp = express();","// htmlapp.use(express.static('public/app'));","// htmlapp.engine('html', require('ejs').renderFile);","// htmlapp.set('view engine', 'html');","// var htmlserver = http.createServer(htmlapp);","// var io = socketio.listen(htmlserver);","// htmlapp.use(express.static(path.resolve(__dirname,'/public/app')));","","// htmlserver.listen( process.env.PORT || 3100, process.env.IP || \"0.0.0.0\");","",""],"id":50},{"start":{"row":110,"column":0},"end":{"row":152,"column":42},"action":"insert","lines":["/**"," * Get port from environment and store in Express."," */","","var port = normalizePort(process.env.PORT || '8080');","","app.set('port', port);","app.set('secPort',port+1);","","/**"," * Create HTTP server."," */","","var server = http.createServer(app);","","/**"," * Listen on provided port, on all network interfaces."," */","","server.listen(port, function() {","   console.log('Server listening on port ',port);","});","server.on('error', onError);","server.on('listening', onListening);","","/**"," * Create HTTPS server."," */ var options = {","  key: fs.readFileSync(__dirname+'/private.key'),","  cert: fs.readFileSync(__dirname+'/certificate.pem')","};","","var secureServer = https.createServer(options,app);","","/**"," * Listen on provided port, on all network interfaces."," */","","secureServer.listen(app.get('secPort'), function() {","   console.log('Server listening on port ',app.get('secPort'));","});","secureServer.on('error', onError);","secureServer.on('listening', onListening);"]}],[{"start":{"row":109,"column":0},"end":{"row":110,"column":0},"action":"insert","lines":["",""],"id":51}],[{"start":{"row":110,"column":0},"end":{"row":111,"column":0},"action":"insert","lines":["",""],"id":52}],[{"start":{"row":111,"column":0},"end":{"row":112,"column":0},"action":"insert","lines":["",""],"id":53}],[{"start":{"row":110,"column":0},"end":{"row":113,"column":23},"action":"insert","lines":["var debug = require('debug')('rest-server:server');","var http = require('http');","var https = require('https');","var fs = require('fs');"],"id":54}],[{"start":{"row":111,"column":0},"end":{"row":112,"column":0},"action":"remove","lines":["var http = require('http');",""],"id":55}],[{"start":{"row":113,"column":0},"end":{"row":114,"column":0},"action":"insert","lines":["",""],"id":56}],[{"start":{"row":114,"column":0},"end":{"row":128,"column":1},"action":"insert","lines":["function normalizePort(val) {","  var port = parseInt(val, 10);","","  if (isNaN(port)) {","    // named pipe","    return val;","  }","","  if (port >= 0) {","    // port number","    return port;","  }","","  return false;","}"],"id":57}],[{"start":{"row":128,"column":1},"end":{"row":129,"column":0},"action":"insert","lines":["",""],"id":58}],[{"start":{"row":129,"column":0},"end":{"row":130,"column":0},"action":"insert","lines":["",""],"id":59}],[{"start":{"row":130,"column":0},"end":{"row":165,"column":0},"action":"insert","lines":["function onError(error) {","  if (error.syscall !== 'listen') {","    throw error;","  }","","  var bind = typeof port === 'string'","    ? 'Pipe ' + port","    : 'Port ' + port;","","  // handle specific listen errors with friendly messages","  switch (error.code) {","    case 'EACCES':","      console.error(bind + ' requires elevated privileges');","      process.exit(1);","      break;","    case 'EADDRINUSE':","      console.error(bind + ' is already in use');","      process.exit(1);","      break;","    default:","      throw error;","  }","}","","/**"," * Event listener for HTTP server \"listening\" event."," */","","function onListening() {","  var addr = server.address();","  var bind = typeof addr === 'string'","    ? 'pipe ' + addr","    : 'port ' + addr.port;","  debug('Listening on ' + bind);","}",""],"id":60}],[{"start":{"row":195,"column":35},"end":{"row":195,"column":36},"action":"insert","lines":["b"],"id":61}],[{"start":{"row":195,"column":36},"end":{"row":195,"column":37},"action":"insert","lines":["i"],"id":62}],[{"start":{"row":195,"column":37},"end":{"row":195,"column":38},"action":"insert","lines":["n"],"id":63}],[{"start":{"row":195,"column":38},"end":{"row":195,"column":39},"action":"insert","lines":["/"],"id":64}],[{"start":{"row":196,"column":36},"end":{"row":196,"column":40},"action":"insert","lines":["bin/"],"id":65}],[{"start":{"row":174,"column":23},"end":{"row":174,"column":24},"action":"remove","lines":["1"],"id":66}],[{"start":{"row":174,"column":22},"end":{"row":174,"column":23},"action":"remove","lines":["+"],"id":67}],[{"start":{"row":174,"column":22},"end":{"row":174,"column":23},"action":"insert","lines":["+"],"id":68}],[{"start":{"row":174,"column":23},"end":{"row":174,"column":24},"action":"insert","lines":["1"],"id":69}],[{"start":{"row":199,"column":0},"end":{"row":199,"column":3},"action":"insert","lines":["// "],"id":70},{"start":{"row":201,"column":0},"end":{"row":201,"column":3},"action":"insert","lines":["// "]},{"start":{"row":202,"column":0},"end":{"row":202,"column":2},"action":"insert","lines":["//"]},{"start":{"row":203,"column":0},"end":{"row":203,"column":2},"action":"insert","lines":["//"]},{"start":{"row":205,"column":0},"end":{"row":205,"column":3},"action":"insert","lines":["// "]},{"start":{"row":206,"column":0},"end":{"row":206,"column":2},"action":"insert","lines":["//"]},{"start":{"row":207,"column":0},"end":{"row":207,"column":3},"action":"insert","lines":["// "]},{"start":{"row":208,"column":0},"end":{"row":208,"column":3},"action":"insert","lines":["// "]},{"start":{"row":209,"column":0},"end":{"row":209,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":110,"column":0},"end":{"row":110,"column":3},"action":"insert","lines":["// "],"id":71},{"start":{"row":111,"column":0},"end":{"row":111,"column":3},"action":"insert","lines":["// "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":3},"action":"insert","lines":["// "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":3},"action":"insert","lines":["// "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":3},"action":"insert","lines":["// "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":3},"action":"insert","lines":["// "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":3},"action":"insert","lines":["// "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":3},"action":"insert","lines":["// "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":3},"action":"insert","lines":["// "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":3},"action":"insert","lines":["// "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":3},"action":"insert","lines":["// "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":3},"action":"insert","lines":["// "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":3},"action":"insert","lines":["// "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":3},"action":"insert","lines":["// "]},{"start":{"row":128,"column":0},"end":{"row":128,"column":3},"action":"insert","lines":["// "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":3},"action":"insert","lines":["// "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":3},"action":"insert","lines":["// "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":3},"action":"insert","lines":["// "]},{"start":{"row":133,"column":0},"end":{"row":133,"column":3},"action":"insert","lines":["// "]},{"start":{"row":135,"column":0},"end":{"row":135,"column":3},"action":"insert","lines":["// "]},{"start":{"row":136,"column":0},"end":{"row":136,"column":3},"action":"insert","lines":["// "]},{"start":{"row":137,"column":0},"end":{"row":137,"column":3},"action":"insert","lines":["// "]},{"start":{"row":139,"column":0},"end":{"row":139,"column":3},"action":"insert","lines":["// "]},{"start":{"row":140,"column":0},"end":{"row":140,"column":3},"action":"insert","lines":["// "]},{"start":{"row":141,"column":0},"end":{"row":141,"column":3},"action":"insert","lines":["// "]},{"start":{"row":142,"column":0},"end":{"row":142,"column":3},"action":"insert","lines":["// "]},{"start":{"row":143,"column":0},"end":{"row":143,"column":3},"action":"insert","lines":["// "]},{"start":{"row":144,"column":0},"end":{"row":144,"column":3},"action":"insert","lines":["// "]},{"start":{"row":145,"column":0},"end":{"row":145,"column":3},"action":"insert","lines":["// "]},{"start":{"row":146,"column":0},"end":{"row":146,"column":3},"action":"insert","lines":["// "]},{"start":{"row":147,"column":0},"end":{"row":147,"column":3},"action":"insert","lines":["// "]},{"start":{"row":148,"column":0},"end":{"row":148,"column":3},"action":"insert","lines":["// "]},{"start":{"row":149,"column":0},"end":{"row":149,"column":3},"action":"insert","lines":["// "]},{"start":{"row":150,"column":0},"end":{"row":150,"column":3},"action":"insert","lines":["// "]},{"start":{"row":151,"column":0},"end":{"row":151,"column":3},"action":"insert","lines":["// "]},{"start":{"row":152,"column":0},"end":{"row":152,"column":3},"action":"insert","lines":["// "]},{"start":{"row":154,"column":0},"end":{"row":154,"column":3},"action":"insert","lines":["// "]},{"start":{"row":155,"column":0},"end":{"row":155,"column":2},"action":"insert","lines":["//"]},{"start":{"row":156,"column":0},"end":{"row":156,"column":2},"action":"insert","lines":["//"]},{"start":{"row":158,"column":0},"end":{"row":158,"column":3},"action":"insert","lines":["// "]},{"start":{"row":159,"column":0},"end":{"row":159,"column":3},"action":"insert","lines":["// "]},{"start":{"row":160,"column":0},"end":{"row":160,"column":3},"action":"insert","lines":["// "]},{"start":{"row":161,"column":0},"end":{"row":161,"column":3},"action":"insert","lines":["// "]},{"start":{"row":162,"column":0},"end":{"row":162,"column":3},"action":"insert","lines":["// "]},{"start":{"row":163,"column":0},"end":{"row":163,"column":3},"action":"insert","lines":["// "]},{"start":{"row":164,"column":0},"end":{"row":164,"column":3},"action":"insert","lines":["// "]},{"start":{"row":167,"column":0},"end":{"row":167,"column":3},"action":"insert","lines":["// "]},{"start":{"row":168,"column":0},"end":{"row":168,"column":2},"action":"insert","lines":["//"]},{"start":{"row":169,"column":0},"end":{"row":169,"column":2},"action":"insert","lines":["//"]},{"start":{"row":171,"column":0},"end":{"row":171,"column":3},"action":"insert","lines":["// "]},{"start":{"row":173,"column":0},"end":{"row":173,"column":3},"action":"insert","lines":["// "]},{"start":{"row":174,"column":0},"end":{"row":174,"column":3},"action":"insert","lines":["// "]},{"start":{"row":176,"column":0},"end":{"row":176,"column":3},"action":"insert","lines":["// "]},{"start":{"row":177,"column":0},"end":{"row":177,"column":2},"action":"insert","lines":["//"]},{"start":{"row":178,"column":0},"end":{"row":178,"column":2},"action":"insert","lines":["//"]},{"start":{"row":180,"column":0},"end":{"row":180,"column":3},"action":"insert","lines":["// "]},{"start":{"row":182,"column":0},"end":{"row":182,"column":3},"action":"insert","lines":["// "]},{"start":{"row":183,"column":0},"end":{"row":183,"column":2},"action":"insert","lines":["//"]},{"start":{"row":184,"column":0},"end":{"row":184,"column":2},"action":"insert","lines":["//"]},{"start":{"row":186,"column":0},"end":{"row":186,"column":3},"action":"insert","lines":["// "]},{"start":{"row":187,"column":0},"end":{"row":187,"column":2},"action":"insert","lines":["//"]},{"start":{"row":188,"column":0},"end":{"row":188,"column":3},"action":"insert","lines":["// "]},{"start":{"row":189,"column":0},"end":{"row":189,"column":3},"action":"insert","lines":["// "]},{"start":{"row":190,"column":0},"end":{"row":190,"column":3},"action":"insert","lines":["// "]},{"start":{"row":192,"column":0},"end":{"row":192,"column":3},"action":"insert","lines":["// "]},{"start":{"row":193,"column":0},"end":{"row":193,"column":2},"action":"insert","lines":["//"]},{"start":{"row":194,"column":0},"end":{"row":194,"column":2},"action":"insert","lines":["//"]},{"start":{"row":195,"column":0},"end":{"row":195,"column":3},"action":"insert","lines":["// "]},{"start":{"row":196,"column":0},"end":{"row":196,"column":3},"action":"insert","lines":["// "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":41,"column":0},"end":{"row":41,"column":3},"action":"insert","lines":["// "],"id":72},{"start":{"row":42,"column":0},"end":{"row":42,"column":3},"action":"insert","lines":["// "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"insert","lines":["// "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"insert","lines":["// "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":3},"action":"insert","lines":["// "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["//"]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":40,"column":0},"end":{"row":48,"column":6},"action":"remove","lines":["// Secure traffic only","// app.all('*', function(req, res, next){","//     console.log('req start: ',req.secure, req.hostname, req.url, app.get('port'));","//   if (req.secure) {","//     return next();","//   };","","// res.redirect('https://'+req.hostname+':'+app.get('secPort')+req.url);","// });"],"id":73}],[{"start":{"row":40,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["",""],"id":74}],[{"start":{"row":40,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["",""],"id":75}]]},"ace":{"folds":[],"scrolltop":346.5,"scrollleft":0,"selection":{"start":{"row":52,"column":18},"end":{"row":52,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":47,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1475362265151,"hash":"6c9cca14952760d5e10dc45e7e74c604aa995f83"}